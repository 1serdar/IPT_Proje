<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Sudoku Oyunu - IPT Projesi</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    /* Sayfa genel ayarları:
   Ortalanmış, mobil uyumlu, arka plan */
body{
    margin:0;
    min-height:100vh;
    background:#f0f0f0;
    display:flex;
    flex-direction:column;
    align-items:center;
    font-family:Arial,sans-serif;
    padding:12px;
    box-sizing:border-box;
    overflow-x:hidden;
}
/* Oyun başlığı */
h1{margin:15px 0 5px}
/* Üst alan:
   Zorluk seçimi, hata sayacı ve süre burada */
.top-wrapper {
    width: 100%;
    max-width: 360px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}


/* Hata ve süre görünümü */
.info {
    color: white;
    padding: 6px 10px;
    border-radius: 6px;
    font-size: 18px;
}

/* Zorluk seviyesi açılır menüsü */
#difficulty {
    padding: 6px;
    border-radius: 6px;
    border: 1px solid #aaa;
    font-size: 18px;
}
/* Sudoku tahtası:
   9x9 grid, kare oran korunur */
.board{
    display:grid;
    width:100%;
    max-width:360px;
    aspect-ratio:1/1;
    grid-template-columns:repeat(9,1fr);
    grid-template-rows:repeat(9,1fr);
    border:3px solid #000;
    background:white;
}
/* Her bir hücre:
   Ortalanmış */
.cell{
    border:1px solid #aaa;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:clamp(14px,3.5vw,20px);
    cursor:pointer;
}
/* Sabit (değiştirilemeyen) hücreler -  Kullanıcının doğru girdiği sayılar - Yanlış girilen sayılar */
.cell.fixed{background:#e6e6e6;font-weight:bold}
.cell.user{color:#0b7504}
.cell.error{color:red}
/* Seçili hücre - Aynı satır, sütun veya kutudaki hücreler - Aynı sayı olan hücreler */
.cell.selected{background:#6fa8ff}
.cell.related{background:#e8f2ff}
.cell.same{background:#6fa8ff}
/* Alt kalın çizgiler */
.cell:nth-child(3n){border-right:2px solid #000}
.cell:nth-child(n+19):nth-child(-n+27),
.cell:nth-child(n+46):nth-child(-n+54){
    border-bottom:2px solid #000
}
/* Sayı seçim alanı ve kazanma mesajı */
.numbers,.win{
     width:100%;
    max-width:360px;
    min-height:60px;
    margin:20px 0;
    display:grid;
    grid-template-columns:repeat(9,1fr);
    gap:10px;
    justify-content:center;
    align-items:center;
}
/* Alt kısımdaki sayı butonları */
.number{
    background:#000;
    color:white;
    text-align:center;
    padding:clamp(6px,2vw,10px) 0;
    font-size:clamp(14px,3vw,18px);
    border-radius:6px;
    cursor:pointer;
    user-select:none;
}
/* Tamamlanan sayıları gizlemek için */
.hidden{visibility:hidden}
/* Oyun bitince gösterilen mesaj */
.win{
    grid-template-columns:1fr;
    font-size:20px;
    font-weight:bold;
    color:green;
    text-align:center;
}
/* ekran uyumu */
@media (max-width:400px){
    h1{font-size:18px}
    #difficulty{font-size:12px}
    .info{font-size:14px}
}

</style>
</head>

<body>

<h1>Sudoku Oyunu - IPT Projesi</h1>

<div class="top-wrapper">
    <div class="info" style="background: #c62828;">Hata: <span id="errors">0</span></div>

    <select id="difficulty">
        <option>Kolay</option>
        <option>Orta</option>
        <option>Zor</option>
    </select>

    <div class="info" style="background: #1F91DC;">Süre: 
    <span id="time">00:00</span>
    </div>
</div>

<div id="board" class="board"></div>
<div id="numbers" class="numbers"></div>

<script>
    alert(// Başlangıç bilgi mesajı
    "Sudoku Oyunu:\n\n" +
    "Her satır, sütun ve 3x3'lük karede (1-9)sayılar tekrarsız dizilmelidir.\n" +
    "Kazanmak için tüm boşlukları doğru sayılarla doldurmalısınız.\n\n" +
    "Üstteki menüden zorluk modu seçilebilir.\n" +
    "İyi eğlenceler!"
);

    // Sudoku bulmacaları (başlangıç tahtaları) s1p,s2p,s3p
    // Sudoku çözümleri (kontrol için) s1s,s2s,s3s
const sudoku1Puzzle=[
[8,6,4,1,0,5,0,3,9],
[1,0,5,0,3,9,0,7,0],
[9,0,3,4,0,0,5,0,0],
[0,9,0,0,0,0,0,0,0],
[0,0,0,0,0,0,7,0,5],
[3,0,0,6,0,7,0,9,8],
[0,4,8,7,2,0,9,5,0],
[2,0,0,0,5,6,8,4,0],
[0,3,7,9,8,0,1,0,2]];

const sudoku1Solution=[
[8,6,4,1,7,5,2,3,9],
[1,2,5,8,3,9,6,7,4],
[9,7,3,4,6,2,5,8,1],
[7,9,1,5,4,8,3,2,6],
[4,8,6,2,9,3,7,1,5],
[3,5,2,6,1,7,4,9,8],
[6,4,8,7,2,1,9,5,3],
[2,1,9,3,5,6,8,4,7],
[5,3,7,9,8,4,1,6,2]];

const sudoku2Puzzle=[
[9,0,3,0,6,0,0,0,0],
[0,0,0,1,0,0,0,3,6],
[0,8,0,0,0,0,0,0,0],
[0,0,0,0,0,9,6,0,7],
[1,0,0,7,3,0,0,8,0],
[0,0,0,0,8,5,0,0,1],
[3,0,5,0,0,0,0,1,0],
[7,0,6,0,0,0,4,0,0],
[8,0,0,4,7,3,5,6,2]];

const sudoku2Solution=[
[9,1,3,5,6,8,2,7,4],
[2,5,4,1,9,7,8,3,6],
[6,8,7,3,4,2,1,5,9],
[5,3,8,2,1,9,6,4,7],
[1,6,2,7,3,4,9,8,5],
[4,7,9,6,8,5,3,2,1],
[3,4,5,9,2,6,7,1,8],
[7,2,6,8,5,1,4,9,3],
[8,9,1,4,7,3,5,6,2]];

const sudoku3Puzzle=[
[0,0,0,9,0,3,0,0,0],
[6,0,5,1,0,0,0,0,0],
[0,7,0,0,0,0,5,0,0],
[1,6,0,0,0,0,2,4,0],
[7,0,0,0,0,0,0,0,9],
[0,4,9,0,0,0,0,7,6],
[0,0,7,0,0,0,0,2,0],
[0,0,0,0,0,8,4,0,1],
[0,0,0,6,0,9,0,0,0]];

const sudoku3Solution=[
[2,1,8,9,5,3,7,6,4],
[6,3,5,1,4,7,9,8,2],
[9,7,4,2,8,6,5,1,3],
[1,6,3,7,9,5,2,4,8],
[7,8,2,3,6,4,1,5,9],
[5,4,9,8,1,2,3,7,6],
[8,9,7,4,3,1,6,2,5],
[3,2,6,5,7,8,4,9,1],
[4,5,1,6,2,9,8,3,7]];
// Zorluklara göre puzzle ve çözümleri eşleştirir
const puzzles = { Kolay: sudoku1Puzzle, Orta: sudoku2Puzzle, Zor: sudoku3Puzzle };
const solutions = { Kolay: sudoku1Solution, Orta: sudoku2Solution, Zor: sudoku3Solution };
// HTML elemanları
const board=document.getElementById("board");
const numbersDiv=document.getElementById("numbers");
const errorSpan=document.getElementById("errors");
const difficultySelect = document.getElementById("difficulty");
// Oyun durumu değişkenleri
let seconds = 0;
let timerInterval = null;

let selectedCell=null; // Seçili hücre
let errors=0;          // Hata sayısı
let gameWon=false;     // Oyun bitiş durumu

const cells=[];// Tüm hücreler burada tutulur
const numberCount=Array(10).fill(0);// Her sayıdan kaç tane doğru girildiğini tutar
const correctMap=new Map();// Hücrenin doğru olup olmadığını tutar

for(let r=0;r<9;r++){
    for(let c=0;c<9;c++){
        const cell=document.createElement("div");
        cell.className="cell";
        cell.dataset.r=r;
        cell.dataset.c=c;

        cell.onclick=e=>{
            e.stopPropagation();
            selectCell(cell);
        };

        board.appendChild(cell);
        cells.push(cell);
        correctMap.set(cell,false);
    }
}

function startNewGame(level){// Yeni oyun başlatır (zorluk seviyesine göre)
    // Oyun durumunu sıfırlar
    // Tahtayı temizler
    // Sabit hücreleri yerleştirir
    // Hata sayısını ve sayaçları sıfırlar

    // Zorluk moduna göre çerçeve rengi
if (level === "Kolay") {
    board.style.border = "3px solid #00FF00";
} else if (level === "Orta") {
    board.style.border = "3px solid #ffff00";
} else if (level === "Zor") {
    board.style.border = "3px solid #FF0000";
}
// süreyi sıfırla
seconds = 0;
document.getElementById("time").textContent = "00:00";

// önceki sayaç varsa durdur
clearInterval(timerInterval);

// süreyi başlat
timerInterval = setInterval(() => {
    seconds++;
    const min = String(Math.floor(seconds / 60)).padStart(2, "0");
    const sec = String(seconds % 60).padStart(2, "0");
    document.getElementById("time").textContent = `${min}:${sec}`;
}, 1000);

gameWon=false;

numbersDiv.className = "numbers";
numbersDiv.innerHTML = "";

for(let i=1;i<=9;i++){
    const n=document.createElement("div");
    n.className="number";
    n.textContent=i;
    n.dataset.num=i;
    n.onclick=e=>{
        e.stopPropagation();
        placeNumber(i);
    };
    numbersDiv.appendChild(n);
}

    const puzzle = puzzles[level];
    const solution = solutions[level];
    window.solution = solution;

    cells.forEach(cell=>{
        cell.textContent="";
        cell.className="cell";
        correctMap.set(cell,false);
    });

    errors = 0;
    errorSpan.textContent=errors;
    numberCount.fill(0);

    puzzle.forEach((row,r)=>{
        row.forEach((val,c)=>{
            const cell = cells[r*9 + c];
            if(val){
                cell.textContent = val;
                cell.classList.add("fixed");
                correctMap.set(cell,true);
                numberCount[val]++;
            }
        });
    });

    updateNumbers();
    clearSelection();
}

difficultySelect.addEventListener("change", e=>{
    startNewGame(e.target.value);
});

startNewGame("Kolay");

function selectCell(cell){
// Tıklanan hücreyi seçer
// Aynı satır, sütun ve 3x3 kutuyu vurgular
// Aynı sayıları renklendirir
    clearHighlights();
    selectedCell=cell;

    const r=cell.dataset.r;
    const c=cell.dataset.c;

    cells.forEach(x=>{
        if(
            x!==cell &&
            (
                x.dataset.r===r ||
                x.dataset.c===c ||
                (Math.floor(x.dataset.r/3)===Math.floor(r/3) &&
                 Math.floor(x.dataset.c/3)===Math.floor(c/3))
            )
        ){
            x.classList.add("related");
        }
    });

    cell.classList.add("selected");

    if(cell.textContent){
        cells.forEach(x=>{
            if(x.textContent===cell.textContent){
                x.classList.add("same");
            }
        });
    }
}

function placeNumber(num){
// Seçili hücreye sayı yerleştirir
// Doğruysa yeşil, yanlışsa kırmızı yapar
// Hata sayısını artırır
// Aynı sayı tekrar girilirse siler
if(gameWon) return;

    if(!selectedCell) return;
    if(selectedCell.classList.contains("fixed")) return;

    const r=selectedCell.dataset.r;
    const c=selectedCell.dataset.c;
    const prev=selectedCell.textContent;
    const wasCorrect=correctMap.get(selectedCell);

    if(prev==num){
        if(wasCorrect) numberCount[num]--;
        selectedCell.textContent="";
        selectedCell.classList.remove("user","error");
        correctMap.set(selectedCell,false);
        updateNumbers();
        selectCell(selectedCell);
        return;
    }

    const isCorrect = solution[r][c]==num;

    if(wasCorrect){
        numberCount[prev]--;
    }

    selectedCell.textContent=num;
    selectedCell.classList.add("user");

    if(isCorrect){
        selectedCell.classList.remove("error");
        numberCount[num]++;
        correctMap.set(selectedCell,true);
    }else{
        selectedCell.classList.add("error");
        correctMap.set(selectedCell,false);
        errors++;
        errorSpan.textContent=errors;
    }

    updateNumbers();
    selectCell(selectedCell);
}

function updateNumbers(){
// Bir sayı 9 kez doğru yerleştirildiyse gizler
// Tüm sayılar tamamlanınca oyunu bitirir
    document.querySelectorAll(".number").forEach(n=>{
        const num=n.dataset.num;
        if(numberCount[num]===9 && !n.classList.contains("hidden")){
            n.animate([
                {backgroundColor:"#000",transform:"scale(1)",opacity:1},
                {backgroundColor:"#4caf50",transform:"scale(1.25)",opacity:1},
                {backgroundColor:"#4caf50",transform:"scale(0.5)",opacity:0}
            ],{duration:400})
            .onfinish=()=>{
    n.classList.add("hidden");
    if(document.querySelectorAll(".number.hidden").length === 9){
        clearInterval(timerInterval);
        numbersDiv.innerHTML = "Tebrikler oyunu bitirdiniz";
        numbersDiv.className = "win";
        gameWon=true;
    }
};

        }else if(numberCount[num]<9){
            n.classList.remove("hidden");
            n.style.backgroundColor="";
            n.style.transform="";
            n.style.opacity="";
        }
    });
}

function clearSelection(){// Seçili hücreyi kaldırır
    selectedCell=null;
    clearHighlights();
}

function clearHighlights(){// Tüm vurguları kaldırır
    cells.forEach(c=>{
        c.classList.remove("selected","related","same");
    });
}

document.addEventListener("keydown",e=>{
// Klavyeden 1-9 basılırsa sayı yerleştirir
// Backspace/Delete ile hücreyi temizler
if(gameWon) return;

    if(!selectedCell) return;

    if(e.key>="1" && e.key<="9"){
        placeNumber(Number(e.key));
    }

    if(e.key==="Backspace" || e.key==="Delete"){
        if(selectedCell.classList.contains("fixed")) return;
        const prev=selectedCell.textContent;
        if(prev && correctMap.get(selectedCell)){
            numberCount[prev]--;
        }
        selectedCell.textContent="";
        selectedCell.classList.remove("user","error");
        correctMap.set(selectedCell,false);
        updateNumbers();
        selectCell(selectedCell);
    }
});

document.addEventListener("click", e => {// Tahta dışına tıklanınca seçimi kaldırır
    if (!board.contains(e.target) && !numbersDiv.contains(e.target) && e.target !== difficultySelect) {
        clearSelection();
    }
});
</script>

</body>
</html>
